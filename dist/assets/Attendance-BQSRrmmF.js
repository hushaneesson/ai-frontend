import{_ as b,c as u,a as t,h as p,i as g,r as w,e as m,v as f,k as v,d as _,t as i,g as c,F as k,j as D,u as h,p as M,o as x,n as y}from"./index-Cx3iL0RU.js";const C={name:"Attendance",data(){return{records:[],filteredRecords:[],loading:!1,filters:{startDate:"",endDate:"",workMode:""},stats:{totalDays:0,totalHours:0,avgHours:0,remoteDays:0}}},computed:{user(){return h().user}},async mounted(){await this.loadRecords()},methods:{async loadRecords(){this.loading=!0;try{const s=await M.attendance.getAll();this.records=s.data.data||s.data||[],this.filteredRecords=[...this.records],this.calculateStats()}catch(s){console.error("Error loading records:",s)}finally{this.loading=!1}},applyFilters(){let s=[...this.records];this.filters.startDate&&(s=s.filter(e=>e.date>=this.filters.startDate)),this.filters.endDate&&(s=s.filter(e=>e.date<=this.filters.endDate)),this.filters.workMode&&(s=s.filter(e=>e.work_mode===this.filters.workMode)),this.filteredRecords=s,this.calculateStats()},calculateStats(){this.stats.totalDays=this.filteredRecords.length,this.stats.remoteDays=this.filteredRecords.filter(e=>e.work_mode==="remote").length;const s=this.filteredRecords.reduce((e,n)=>{if(n.check_out_time){const d=new Date(n.check_in_time),r=new Date(n.check_out_time);return e+(r-d)/1e3/60}return e},0);this.stats.totalHours=Math.round(s/60),this.stats.avgHours=this.stats.totalDays>0?Math.round(s/this.stats.totalDays/60*10)/10:0},exportData(){const s=["Date","Check In","Check Out","Duration","Work Mode","Event Type","Notes"],e=this.filteredRecords.map(a=>[a.date,this.formatTime(a.check_in_time),a.check_out_time?this.formatTime(a.check_out_time):"",a.check_out_time?this.calculateDuration(a):"",a.work_mode,a.event_type||"",a.notes||""]),n=[s,...e].map(a=>a.join(",")).join(`
`),d=new Blob([n],{type:"text/csv"}),r=window.URL.createObjectURL(d),l=document.createElement("a");l.href=r,l.download=`attendance_${new Date().toISOString().split("T")[0]}.csv`,l.click(),window.URL.revokeObjectURL(r)},formatDate(s){return new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},formatTime(s){return s?new Date(s).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"-"},calculateDuration(s){if(!s.check_in_time||!s.check_out_time)return"-";const e=new Date(s.check_in_time),d=new Date(s.check_out_time)-e,r=Math.floor(d/1e3/60/60),l=Math.floor(d/1e3/60%60);return`${r}h ${l}m`},getWorkModeLabel(s){return{office:"🏢 Office",remote:"🏠 Remote",client_site:"👥 Client",ooo:"🚫 OOO"}[s]||s},getWorkModeClass(s){return{office:"bg-blue-100 text-blue-800",remote:"bg-purple-100 text-purple-800",client_site:"bg-green-100 text-green-800",ooo:"bg-gray-100 text-gray-800"}[s]||"bg-gray-100 text-gray-800"},handleLogout(){h().logout(),this.$router.push("/login")}}},S={class:"min-h-screen bg-gray-50"},R={class:"bg-white shadow-sm border-b border-gray-200"},V={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},L={class:"flex justify-between h-16"},j={class:"flex items-center"},H={class:"flex items-center space-x-4"},O={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},T={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6"},z={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},A={class:"flex items-end"},B={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},U={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},F={class:"flex items-center justify-between"},N={class:"text-3xl font-bold text-blue-600"},W={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},E={class:"flex items-center justify-between"},I={class:"text-3xl font-bold text-green-600"},q={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},P={class:"flex items-center justify-between"},G={class:"text-3xl font-bold text-purple-600"},J={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},K={class:"flex items-center justify-between"},Q={class:"text-3xl font-bold text-yellow-600"},X={class:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"},Y={class:"px-6 py-4 border-b border-gray-200 flex justify-between items-center"},Z={key:0,class:"p-12 text-center"},$={key:1,class:"p-12 text-center text-gray-500"},tt={key:2,class:"overflow-x-auto"},et={class:"min-w-full divide-y divide-gray-200"},st={class:"bg-white divide-y divide-gray-200"},ot={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},rt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},lt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},at={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},it={class:"px-6 py-4 whitespace-nowrap text-sm"},nt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},dt={class:"px-6 py-4 whitespace-nowrap text-sm"},ut={class:"px-6 py-4 text-sm text-gray-600 max-w-xs truncate"};function ct(s,e,n,d,r,l){const a=w("router-link");return x(),u("div",S,[t("nav",R,[t("div",V,[t("div",L,[t("div",j,[p(a,{to:"/dashboard",class:"text-2xl font-bold text-gray-900"},{default:g(()=>[...e[6]||(e[6]=[c("Agile Squad",-1)])]),_:1})]),t("div",H,[p(a,{to:"/dashboard",class:"text-gray-600 hover:text-gray-900"},{default:g(()=>[...e[7]||(e[7]=[c("Dashboard",-1)])]),_:1}),p(a,{to:"/squads",class:"text-gray-600 hover:text-gray-900"},{default:g(()=>[...e[8]||(e[8]=[c("Squads",-1)])]),_:1}),p(a,{to:"/leave-requests",class:"text-gray-600 hover:text-gray-900"},{default:g(()=>[...e[9]||(e[9]=[c("Leave",-1)])]),_:1}),p(a,{to:"/profile",class:"text-gray-600 hover:text-gray-900"},{default:g(()=>[...e[10]||(e[10]=[c("Profile",-1)])]),_:1}),t("button",{onClick:e[0]||(e[0]=(...o)=>l.handleLogout&&l.handleLogout(...o)),class:"text-gray-600 hover:text-gray-900"},"Logout")])])])]),t("div",O,[e[29]||(e[29]=t("div",{class:"mb-8"},[t("h2",{class:"text-3xl font-bold text-gray-900"},"Attendance History"),t("p",{class:"text-gray-600 mt-1"},"View and manage your attendance records")],-1)),t("div",T,[e[15]||(e[15]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Filters",-1)),t("div",z,[t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"From Date",-1)),m(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>r.filters.startDate=o),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[f,r.filters.startDate]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"To Date",-1)),m(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>r.filters.endDate=o),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[f,r.filters.endDate]])]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Work Mode",-1)),m(t("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>r.filters.workMode=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},[...e[13]||(e[13]=[_('<option value="">All</option><option value="office">Office</option><option value="remote">Remote</option><option value="client_site">Client Site</option><option value="ooo">Out of Office</option>',5)])],512),[[v,r.filters.workMode]])]),t("div",A,[t("button",{onClick:e[4]||(e[4]=(...o)=>l.applyFilters&&l.applyFilters(...o)),class:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 font-medium"}," Apply Filters ")])])]),t("div",B,[t("div",U,[t("div",F,[t("div",null,[e[16]||(e[16]=t("p",{class:"text-sm text-gray-600"},"Total Days",-1)),t("p",N,i(r.stats.totalDays),1)]),e[17]||(e[17]=t("div",{class:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center"},[t("svg",{class:"w-6 h-6 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z","clip-rule":"evenodd"})])],-1))])]),t("div",W,[t("div",E,[t("div",null,[e[18]||(e[18]=t("p",{class:"text-sm text-gray-600"},"Total Hours",-1)),t("p",I,i(r.stats.totalHours)+"h",1)]),e[19]||(e[19]=t("div",{class:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center"},[t("svg",{class:"w-6 h-6 text-green-600",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})])],-1))])]),t("div",q,[t("div",P,[t("div",null,[e[20]||(e[20]=t("p",{class:"text-sm text-gray-600"},"Average Hours/Day",-1)),t("p",G,i(r.stats.avgHours)+"h",1)]),e[21]||(e[21]=t("div",{class:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center"},[t("svg",{class:"w-6 h-6 text-purple-600",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"})])],-1))])]),t("div",J,[t("div",K,[t("div",null,[e[22]||(e[22]=t("p",{class:"text-sm text-gray-600"},"Remote Days",-1)),t("p",Q,i(r.stats.remoteDays),1)]),e[23]||(e[23]=t("div",{class:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center"},[t("svg",{class:"w-6 h-6 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})])],-1))])])]),t("div",X,[t("div",Y,[e[25]||(e[25]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Attendance Records",-1)),t("button",{onClick:e[5]||(e[5]=(...o)=>l.exportData&&l.exportData(...o)),class:"text-blue-600 hover:text-blue-700 font-medium text-sm flex items-center gap-2"},[...e[24]||(e[24]=[t("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),c(" Export CSV ",-1)])])]),r.loading?(x(),u("div",Z,[...e[26]||(e[26]=[t("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent"},null,-1),t("p",{class:"text-gray-500 mt-4"},"Loading attendance records...",-1)])])):r.filteredRecords.length===0?(x(),u("div",$,[...e[27]||(e[27]=[t("svg",{class:"mx-auto h-16 w-16 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),t("p",null,"No attendance records found",-1),t("p",{class:"text-sm mt-2"},"Try adjusting your filters",-1)])])):(x(),u("div",tt,[t("table",et,[e[28]||(e[28]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Check In"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Check Out"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Duration"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Work Mode"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Event Type"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Notes")])],-1)),t("tbody",st,[(x(!0),u(k,null,D(r.filteredRecords,o=>(x(),u("tr",{key:o.id,class:"hover:bg-gray-50"},[t("td",ot,i(l.formatDate(o.date)),1),t("td",rt,i(l.formatTime(o.check_in_time)),1),t("td",lt,i(o.check_out_time?l.formatTime(o.check_out_time):"-"),1),t("td",at,i(o.check_out_time?l.calculateDuration(o):"-"),1),t("td",it,[t("span",{class:y(["px-2 py-1 text-xs rounded-full",l.getWorkModeClass(o.work_mode)])},i(l.getWorkModeLabel(o.work_mode)),3)]),t("td",nt,i(o.event_type||"-"),1),t("td",dt,[t("span",{class:y(["px-2 py-1 text-xs rounded-full",o.check_out_time?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},i(o.check_out_time?"Complete":"In Progress"),3)]),t("td",ut,i(o.notes||"-"),1)]))),128))])])]))])])])}const pt=b(C,[["render",ct]]);export{pt as default};
